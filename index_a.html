<!DOCTYPE html>
<html>
<head>
<title>Anyscale Stable Diffusion Demo</title>

<script>
function searchFunction(event) {
event.preventDefault();
  
const searchTerm = document.getElementById('search').value;
const searchTerm_1 = searchTerm + " in a store shelve"
const searchTerm_2 = searchTerm + " in a shopping basket"
const headers = { 'anyscale-token': 'mXWOSijC_bOZFH971iWcIbWwVURxRwI3HuaXe67OMAQ' };

fetch(`https://anyscale-lewis.global.ssl.fastly.net/imagine?prompt=${searchTerm_1}&img_size=512`, { headers })
  .then(res=>{return res.blob()})
  .then(blob=>{
    var img = URL.createObjectURL(blob);
    // Do whatever with the img
    document.getElementById('image_1').setAttribute('src', img);
  })

  
  fetch(`https://anyscale-lewis.global.ssl.fastly.net/imagine?prompt=${searchTerm_2}&img_size=512`, { headers })
  .then(res=>{return res.blob()})
  .then(blob=>{
    var img = URL.createObjectURL(blob);
    // Do whatever with the img
    document.getElementById('image_2').setAttribute('src', img);
  })
  
console.log('Search term:', searchTerm);
}
</script>

<style>
body {
font-family: Arial;
margin: 20px;
}
h1 {
color: #0B042E;
}
.search-container {
display: flex;
max-width: 400px;
align-items: left;
margin: 30px auto;
border: 1px solid dodgerblue;
border-radius: 10px;
padding: 3px;
font-size: 14px;
float: left;
}
input[type="text"] {
padding: 10px;
border: none;
box-sizing: border-box;
font-size: 14px;
border-radius: 5px 0 0 5px;
}
button {
padding: 10px 15px;
border: none;
border-radius: 0 5px 5px 0;
cursor: pointer;
text-transform: uppercase;
color: white;
background: dodgerblue;
}
.logo {
height: 50px;
width: 200px;
}
img.logo {
  width: 100%;
  height: 100%;
}
th, td {
  padding: 10px;
  font-weight: bold;
}
</style>

  
</head>
<body>
<div class="logo"><img src="instacart_logo.png"/></div>
<h1>Instacart Imagine</h1>
<table>
  <tr>
    <td>
    <form onsubmit="searchFunction(event)" autocomplete="off">
      <div class="search-container">
        <input type="text" id="search" name="q" placeholder="product name">
        <button type="submit">Generate</button>
      </div>
    </form>
    </td>
  </tr>
  <tr>
    <td><img id="image_1" src=""/></td>
    <td><img id="image_2" src=""/></td>
  </tr>
  <tr>
    <td>Items on Shelves</td> 
    <td>Items in a Basket</td> 
  </tr> 
</table>
</div>
</body>
</html>
